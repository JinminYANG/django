{% extends 'base.html' %}

{% block content %}

    <div style="border-radius: 1rem; margin: 2rem; text-align: center;">
        <h1 style="font-family: 'lobster', cursive;">
            Hello World LIST!
        </h1>

        <form action="/account/hello_world/" method="post" id="form">
            {% csrf_token %}
            <div>
                <input type="text" name="hello_world_input">
                <input type="hidden" name="team_color" id="team_color" value="{{ form.team_color.value|default_if_none:'' }}">
            </div>
            <div>
                <input type="submit" class="btn btn-primary" value="POST">
            </div>
        </form>

        <div id="get">
            {% if hello_world_list %}
            <h1>
                {% for hello_world in hello_world_list %}
                <h4>
                    {{ hello_world.text }}
                    {{ hello_world.team_color }}
                </h4>
                {% endfor %}
            </h1>
            {% endif %}
        </div>
    </div>

    {% comment %}
    {% if hello_world_list %}
    <script>
        {% for hello_world in hello_world_list %}
            console.log( `{{ hello_world.text }}` )
        {% endfor %}
    </script>
    {% endif %}
    {% endcomment %}

    {% comment %}
    {% load js %}
    <script type="text/javascript">
        var someVar = {{ some_var | js }};
        console.log(someVar);
    </script>
    {% endcomment %}

    {% if hello_world_list %}
        {% for hello_world in hello_world_list %}
            {{ hello_world.text|json_script:'get-data' }}
        {% endfor %}
    {% endif %}


    <script>
        const value = JSON.parse(document.getElementById('get-data').textContent);
        console.log(value);


        {% comment %}
        let html = '';
        let num = 1;

        {% for hello_world in hello_world_list %}
            html += `<input type="hidden" id="myVar${num++}" class="vars" name="{{ hello_world.text }}${num++}" value="{{ hello_world.text }}">`
            {{ hello_world.text|json_script:'hello-data' }}
        {% endfor %}

        document.querySelector('#get').innerHTML = html;

        var vars = document.querySelectorAll(".vars");
        Array.from(vars).forEach((elem) => {
            console.log(elem.value);
        });

            html 파일 안에서 script 구문을 이용하여 DB 값을 받아와 script에서 사용하는 법
                => elem.value (최종 값)
        {% endcomment %}

    </script>



{% endblock %}